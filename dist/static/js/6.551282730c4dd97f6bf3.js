webpackJsonp([6],{3330:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("exGp"),o=a.n(s),i=a("spLH"),l=a("STSY"),c={components:{pagination:i.a},data:function(){return{roleListInfo:{content:"",index:0,limit:10,page:1},itemList:[],total:0,dialogVisible:!1,dialogType:"",searchInfo:"",rules:{remark:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:10,max:150,message:"长度在 10 到 150 个字符",trigger:"blur"}]},editInfo:{}}},methods:{getRoleList:function(){var e=this;return o()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.b)(e.roleListInfo);case 2:a=t.sent,200==(r=a.data).code&&1e4==r.data.flag&&(e.itemList=r.data.resultData.records);case 5:case"end":return t.stop()}},t,e)}))()},addRole:function(){var e=this;return o()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.dialogVisible=!0,e.dialogType="add";case 2:case"end":return t.stop()}},t,e)}))()},edit:function(e){var t=this;return o()(n.a.mark(function a(){var r,s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.d)(e);case 2:r=a.sent,s=r.data,t.editInfo=s.data.resultData,t.dialogVisible=!0,t.dialogType="edit";case 7:case"end":return a.stop()}},a,t)}))()},searchRole:function(){var e=this;return o()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.roleListInfo.content=e.searchInfo,t.next=3,Object(l.b)(e.roleListInfo);case 3:a=t.sent,r=a.data,e.itemList=r.data.resultData.records;case 6:case"end":return t.stop()}},t,e)}))()},remove:function(e){var t=this;this.$confirm("确定要执行该操作吗?","删除角色",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark(function a(){var r,s,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=[e],a.next=3,Object(l.a)(r);case 3:s=a.sent,500==(o=s.data).data.code?t.$message({message:o.data.msg,type:"warning"}):200==o.data.code&&t.$message({message:o.data.msg,type:"success"}),t.getRoleList();case 7:case"end":return a.stop()}},a,t)})))},handleClose:function(e){var t=this;this.$confirm("当前修改尚未提交,是否放弃修改？").then(function(a){t.$message({message:"修改失败",type:"error"}),e()}).catch(function(e){})},submitForm:function(e){var t,a=this;this.$refs[e].validate((t=o()(n.a.mark(function e(t){var r,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=22;break}if("edit"!=a.dialogType){e.next=12;break}return e.next=4,Object(l.e)(a.editInfo);case 4:r=e.sent,r.data,a.getRoleList(),a.dialogVisible=!1,a.editInfo={},a.$message({message:"提交成功",type:"success"}),e.next=20;break;case 12:return e.next=14,Object(l.c)({createTime:"2020-04-09T07:29:29.675Z",createUserId:1,deletec:0,id:"string",menuId:[1],remark:"string",roleName:"test",updateTime:"2020-04-09T07:29:29.675Z"});case 14:s=e.sent,s.data,a.dialogVisible=!1,a.getRoleList(),a.editInfo={},a.$message({message:"提交成功",type:"success"});case 20:e.next=24;break;case 22:return console.log("error submit!!"),e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.getRoleList()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data_box"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("新增角色")])],1),e._v(" "),a("el-col",{attrs:{span:6,offset:15}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入需要查询的角色信息",clearable:""},on:{change:e.searchRole},model:{value:e.searchInfo,callback:function(t){e.searchInfo=t},expression:"searchInfo"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchRole},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.itemList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"公司名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleType",label:"角色类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.roleType?a("span",[e._v("系统用户")]):e._e(),e._v(" "),2==t.row.roleType?a("span",[e._v("厂商用户")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dataFormat")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"explain",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"btns",on:{click:function(a){return e.edit(t.row.id)}}},[e._v("修改")]),e._v(" "),a("span",{staticClass:"btns",on:{click:function(a){return e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"edit"==e.dialogType?"修改角色":"新增角色",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,top:"10vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"editInfo",staticClass:"demo-ruleForm",attrs:{model:e.editInfo,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色ID",prop:"name",disabled:""}},[a("el-input",{model:{value:e.editInfo.id,callback:function(t){e.$set(e.editInfo,"id",t)},expression:"editInfo.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"name"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.editInfo.remark,callback:function(t){e.$set(e.editInfo,"remark",t)},expression:"editInfo.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("editInfo")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("taPw")},"data-v-6d8b6c5b",null);t.default=d.exports},taPw:function(e,t){}});